Quickly Exploring Data {#CHAPTER_QUICK}
======================

Although I've used the ggplot2 package for most of the graphics in
this book, it is not the only way to make graphs. For very quick
exploration of data, it's sometimes useful to use the plotting
functions in base R. These are installed by default with R and do not
require any additional packages to be installed. They're quick to
type, are straightforward to use in simple cases, and run very quickly.

If you want to do anything beyond very simple graphs, though, it's
generally better to switch to ggplot2. This is in part because ggplot2
provides a unified interface and set of options, instead of the grab bag
of modifiers and special cases required in base graphics. Once you learn
how ggplot2 works, you can use that knowledge for everything from
scatter plots and histograms to violin plots and maps.

Each recipe in this section shows how to make a graph with base
graphics. Each recipe also shows how to make a similar graph with the
qplot() function in ggplot2, which has a syntax similar to the base
graphics functions. For each qplot() graph, there is also an equivalent
using the more powerful ggplot() function.

If you already know how to use base graphics, having these examples side
by side will help you transition to using ggplot2 for when you want to
make more sophisticated graphics.

Creating a Scatter Plot {#RECIPE_QUICK_SCATTER}
-----------------------

### Problem {#_problem_6}

You want to create a scatter plot.

### Solution {#_solution_6}

To make a scatter plot ([figure\_title](#FIG_QUICK_SCATTER_BASE)), use
plot() and pass it a vector of *x* values followed by a vector of *y*
values:

```{r}
plot(mtcars$wt, mtcars$mpg)
```

![Scatter plot with base graphics](figs/rgcb_0201.png)

With the ggplot2 package, you can get a similar result using qplot()
([figure\_title](#FIG_QUICK_SCATTER_QPLOT)):

```{r}
library(ggplot2)
qplot(mtcars$wt, mtcars$mpg)
```

![Scatter plot with qplot() from ggplot2](figs/rgcb_0202.png)

If the two vectors are already in the same data frame, you can use the
following syntax:

```{r}
qplot(wt, mpg, data=mtcars)
# This is equivalent to:
ggplot(mtcars, aes(x=wt, y=mpg)) + geom_point()
```

### See Also {#_see_also_4}

See [???](#CHAPTER_SCATTER) for more in-depth information about creating
scatter plots.

Creating a Line Graph {#RECIPE_QUICK_LINE}
---------------------

### Problem {#_problem_7}

You want to create a line graph.

### Solution {#_solution_7}

To make a line graph using plot()
([figure\_title](#FIG_QUICK_LINE_BASE), left), pass it a vector of *x*
values and a vector of *y* values, and use type="l":

```{r}
plot(pressure$temperature, pressure$pressure, type="l")
```

![Left: line graph with base graphics; right: with points and another
line](figs/rgcb_0203.png)

To add points and/or multiple lines
([figure\_title](#FIG_QUICK_LINE_BASE), right), first call plot() for
the first line, then add points with points() and additional lines with
lines():

```{r}
plot(pressure$temperature, pressure$pressure, type="l")
points(pressure$temperature, pressure$pressure)

lines(pressure$temperature, pressure$pressure/2, col="red")
points(pressure$temperature, pressure$pressure/2, col="red")
```

With ggplot2, you can get a similar result using qplot() with
geom="line" ([figure\_title](#FIG_QUICK_LINE_QPLOT)):

```{r}
library(ggplot2)
qplot(pressure$temperature, pressure$pressure, geom="line")
```

![Left: line graph with qplot() from ggplot2; right: with points
added](figs/rgcb_0204.png)

If the two vectors are already in the same data frame, you can use the
following syntax:

```{r}
qplot(temperature, pressure, data=pressure, geom="line")
# This is equivalent to:
ggplot(pressure, aes(x=temperature, y=pressure)) + geom_line()


# Lines and points together
qplot(temperature, pressure, data=pressure, geom=c("line", "point"))
# Equivalent to:
ggplot(pressure, aes(x=temperature, y=pressure)) + geom_line() + geom_point()
```

### See Also {#_see_also_5}

See [???](#CHAPTER_LINE_GRAPH) for more in-depth information about
creating line graphs.

Creating a Bar Graph {#RECIPE_QUICK_BAR}
--------------------

### Problem {#_problem_8}

You want to make a bar graph.

### Solution {#_solution_8}

To make a bar graph of values ([figure\_title](#FIG_QUICK_BAR_BASE)),
use barplot() and pass it a vector of values for the height of each bar
and (optionally) a vector of labels for each bar. If the vector has
names for the elements, the names will automatically be used as labels:

```{r}
barplot(BOD$demand, names.arg=BOD$Time)
```

![Left: bar graph of values with base graphics; right: bar graph of
counts](figs/rgcb_0205.png)

Sometimes "bar graph" refers to a graph where the bars represent
the *count* of cases in each category. This is similar to a histogram,
but with a discrete instead of continuous x-axis. To generate the count
of each unique value in a vector, usethe table() function:

table(mtcars\$cyl)
4 6 8 11 7 14 \# There are 11 cases of the value 4, 7 cases of 6, and 14
cases of 8
Simply pass the table to barplot() to generate the graph of counts:

```{r}
# Generate a table of counts
barplot(table(mtcars$cyl))
```

With the ggplot2 package, you can get a similar result using qplot()
([figure\_title](#FIG_QUICK_BAR_QPLOT)). To plot a bar graph of
*values*, use geom="bar" and stat="identity". Notice the difference in
the output when the *x* variable is continuous and when it is discrete:

```{r}
library(ggplot2)
qplot(BOD$Time, BOD$demand, geom="bar", stat="identity")

# Convert the x variable to a factor, so that it is treated as discrete
qplot(factor(BOD$Time), BOD$demand, geom="bar", stat="identity")
```

![Left: bar graph of values with qplot() with continuous x variable;
right: with x variable converted to a factor (notice that there is no
entry for 6)](figs/rgcb_0206.png)

qplot() can also be used to graph the *counts* in each category
([figure\_title](#FIG_QUICK_BAR_QPLOT_COUNT)). This is in fact the
default way that ggplot2 creates bar graphs, and requires less typing
than a bar graph of values. Once again, notice the difference between a
continuous x-axis and a discrete one.

```{r}
# cyl is continuous here
qplot(mtcars$cyl)

# Treat cyl as discrete
qplot(factor(mtcars$cyl))
```

![Left: bar graph of counts with qplot() with continuous x variable;
right: with x variable converted to a factor](figs/rgcb_0207.png)

If the vector is in a data frame, you can use the following syntax:

```{r}
# Bar graph of values. This uses the BOD data frame, with the
#"Time" column for x values and the "demand" column for y values.
qplot(Time, demand, data=BOD, geom="bar", stat="identity")
# This is equivalent to:
ggplot(BOD, aes(x=Time, y=demand)) + geom_bar(stat="identity")


# Bar graph of counts
qplot(factor(cyl), data=mtcars)
# This is equivalent to:
ggplot(mtcars, aes(x=factor(cyl))) + geom_bar()
```

### See Also {#_see_also_6}

See [???](#CHAPTER_BAR_GRAPH) for more in-depth information about
creating bar graphs.

Creating a Histogram {#RECIPE_QUICK_HISTOGRAM}
--------------------

### Problem {#_problem_9}

You want to view the distribution of one-dimensional data with a
histogram.

### Solution {#_solution_9}

To make a histogram ([figure\_title](#FIG_QUICK_HIST_BASE)), use hist()
and pass it a vector of values:

```{r}
hist(mtcars$mpg)

# Specify approximate number of bins with breaks
hist(mtcars$mpg, breaks=10)
```

![Left: histogram with base graphics; right: with more bins. Notice that
because the bins are narrower, there are fewer items in each
bin.](figs/rgcb_0208.png)

With the ggplot2 package, you can get a similar resultusing qplot()
([figure\_title](#FIG_QUICK_HIST_QPLOT)):

```{r}
qplot(mtcars$mpg)
```

![Left: histogram with qplot() from ggplot2, with default bin width;
right: with wider bins](figs/rgcb_0209.png)

If the vector is in a data frame, you can use the following syntax:

```{r}
library(ggplot2)
qplot(mpg, data=mtcars, binwidth=4)
# This is equivalent to:
ggplot(mtcars, aes(x=mpg)) + geom_histogram(binwidth=4)
```

### See Also {#_see_also_7}

For more in-depth information about creating histograms, see Recipes
[???](#RECIPE_DISTRIBUTION_BASIC_HIST) and
[???](#RECIPE_DISTRIBUTION_MULTI_HIST).

Creating a Box Plot {#RECIPE_QUICK_BOXPLOT}
-------------------

### Problem {#_problem_10}

You want to create a box plot for comparing distributions.

### Solution {#_solution_10}

To make a box plot ([figure\_title](#FIG_QUICK_BOXPLOT_BASE)), use
plot() and pass it a factor of *x* values and a vector of *y* values.
When *x* is a factor (as opposed to a numeric vector), it will
automatically create a box plot:

```{r}
plot(ToothGrowth$supp, ToothGrowth$len)
```

![Left: box plot with base graphics; right: with multiple grouping
variables](figs/rgcb_0210.png)

If the two vectors are in the same data frame, you can also use formula
syntax. With this syntax, you can combine two variables on the x-axis,
as in [figure\_title](#FIG_QUICK_BOXPLOT_BASE):

```{r}
# Formula syntax
boxplot(len ~ supp, data = ToothGrowth)

# Put interaction of two variables on x-axis
boxplot(len ~ supp + dose, data = ToothGrowth)
```

With the ggplot2 package, you can get a similar resultusing qplot()
([figure\_title](#FIG_QUICK_BOXPLOT_QPLOT)), with geom="boxplot":

```{r}
library(ggplot2)
qplot(ToothGrowth$supp, ToothGrowth$len, geom="boxplot")
```

![Left: box plot with qplot(); right: with multiple grouping
variables](figs/rgcb_0211.png)

If the two vectors are already in the same data frame, you can use the
following syntax:

```{r}
qplot(supp, len, data=ToothGrowth, geom="boxplot")
# This is equivalent to:
ggplot(ToothGrowth, aes(x=supp, y=len)) + geom_boxplot()
```

It's also possible to make box plots for multiple variables, by
combining the variables with interaction(), as in
[figure\_title](#FIG_QUICK_BOXPLOT_QPLOT). In this case, the dose
variable is numeric, so we must convert it to a factor to use it as a
grouping variable:

```{r}
# Using three separate vectors
qplot(interaction(ToothGrowth$supp, ToothGrowth$dose), ToothGrowth$len,
      geom="boxplot")

# Alternatively, get the columns from the data frame
qplot(interaction(supp, dose), len, data=ToothGrowth, geom="boxplot")
# This is equivalent to:
ggplot(ToothGrowth, aes(x=interaction(supp, dose), y=len)) + geom_boxplot()
```

> **Note**
>
> You may have noticed that the box plots from base graphics are
> ever-so-slightly different from those from ggplot2. This is because
> they use slightly different methods for calculating quantiles. See
> ?geom\$\$\_\$\$boxplot and ?boxplot.stats for more information on how
> they differ.

### See Also {#_see_also_8}

For more on making basic box plots, see
[???](#RECIPE_DISTRIBUTION_BASIC_BOXPLOT).

Plotting a Function Curve {#RECIPE_QUICK_FUNCTION}
-------------------------

### Problem {#_problem_11}

You want to plot a function curve.

### Solution {#_solution_11}

To plot a function curve, as in
[figure\_title](#FIG_QUICK_FUNCTION_BASE), use curve() and pass it an
expression with the variable x:

```{r}
curve(x^3 - 5*x, from=-4, to=4)
```

![Left: function curve with base graphics; right: with user-defined
function](figs/rgcb_0212.png)

You can plot any function that takes a numeric vector as input and
returns a numeric vector, including functions that you define yourself.
Using add=TRUE will add a curve to the previously created plot:

```{r}
# Plot a user-defined function
myfun <- function(xvar) {
    1/(1 + exp(-xvar + 10))
}
curve(myfun(x), from=0, to=20)
# Add a line:
curve(1-myfun(x), add = TRUE, col = "red")
```

With the ggplot2 package, you can get a similar resultusing qplot()
([figure\_title](#FIG_QUICK_FUNCTION_QPLOT)), by using stat="function"
and geom="line" and passing it a function that takes a numeric vector as
input and returns a numeric vector:

```{r}
library(ggplot2)
# This sets the x range from 0 to 20
qplot(c(0,20), fun=myfun, stat="function", geom="line")
# This is equivalent to:
ggplot(data.frame(x=c(0, 20)), aes(x=x)) + stat_function(fun=myfun, geom="line")
```

![A function curve with qplot()](figs/rgcb_0213.png)

### See Also {#_see_also_9}

See [???](#RECIPE_MISCGRAPH_FUNCTION) for more in-depth information
about plotting function curves.
